# ุชุนูููุงุช ุชูุนูู ูุธุงู ุฅูุตุงูุงุช ุงููุจุถ

## ๐ ุงูุฎุทูุงุช ุงููุทููุจุฉ:

### 1. ุชุดุบูู Migration
ุงูุชุญ Terminal ูู ูุฌูุฏ backend ููู ุจุชุดุบูู:
```bash
php artisan migrate
```

### 2. ุฅูุดุงุก ูุฌูุฏ ุงูุชุฎุฒูู ููุตูุฑ
ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏ receipts ูู storage:
```bash
php artisan storage:link
```

### 3. ุงุฎุชุจุงุฑ ุงููุธุงู

#### ูููุณูู (Salesman):
1. ุณุฌู ุฏุฎูู ููุณูู
2. ุงุฐูุจ ุฅูู "ุฅูุตุงูุงุช ุงููุจุถ" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
3. ุงุถุบุท "ุฅูุตุงู ุฌุฏูุฏ"
4. ุงุฎุชุฑ ุงููุชุฌุฑ ูุฃุฏุฎู ุงููุจูุบ
5. ุณูุชู ุฅูุดุงุก ุงูุฅูุตุงู ุจุญุงูุฉ "ูู ุงูุชุธุงุฑ ุงูุชูุซูู"

#### ูุฃููู ุงููุฎุฒู (Warehouse Keeper):
1. ุณุฌู ุฏุฎูู ูุฃููู ูุฎุฒู
2. ุงุฐูุจ ุฅูู "ุชูุซูู ุฅูุตุงูุงุช ุงููุจุถ" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
3. ุณุชุฌุฏ ุงูุฅูุตุงูุงุช ุงููุนููุฉ
4. ุงุถุบุท "ุชูุซูู" ุนูู ุฃู ุฅูุตุงู
5. ุงุฑูุน ุตูุฑุฉ ุงูุฅูุตุงู ุงููุฎุชูู
6. ุงุถุบุท "ุชูุซูู ูุฎุตู ุงูุฏูู"
7. ุณูุชู:
   - ุชุญุฏูุซ ุญุงูุฉ ุงูุฅูุตุงู ุฅูู "ููุซู"
   - ุฎุตู ุงููุจูุบ ูู ุฏูู ุงููุชุฌุฑ ูู ุฌุฏูู store_debt_ledger
   - ุญูุธ ุตูุฑุฉ ุงูุฅูุตุงู

---

## ๐๏ธ ุงููููุงุช ุงููุถุงูุฉ:

### Models:
- `app/Models/Payment/StorePayment.php`

### Services:
- `app/Services/PaymentService.php`

### Controllers:
- `app/Http/Controllers/Marketer/Payments/PaymentController.php`
- `app/Http/Controllers/Warehouse/Payments/PaymentConfirmationController.php`

### Views (ุงููุณูู):
- `resources/views/marketer/payments/index.blade.php`
- `resources/views/marketer/payments/create.blade.php`
- `resources/views/marketer/payments/show.blade.php`
- `resources/views/marketer/payments/partials/payments-table.blade.php`

### Views (ุฃููู ุงููุฎุฒู):
- `resources/views/warehouse/payments/index.blade.php`
- `resources/views/warehouse/payments/show.blade.php`
- `resources/views/warehouse/payments/partials/payments-table.blade.php`

### Migrations:
- `database/migrations/2026_01_31_000001_add_status_to_store_payments_table.php`

### Routes:
ุชู ุชุญุฏูุซ `routes/web.php` ุจุฅุถุงูุฉ:
- ูุณุงุฑุงุช ุงููุณูู ููุฅูุตุงูุงุช
- ูุณุงุฑุงุช ุฃููู ุงููุฎุฒู ููุชูุซูู

---

## ๐ ุขููุฉ ุงูุนูู:

### 1. ุฅูุดุงุก ุฅูุตุงู (ุงููุณูู):
```
ุงููุณูู โ ุงุฎุชูุงุฑ ุงููุชุฌุฑ + ุงููุจูุบ โ ุฅูุดุงุก ุฅูุตุงู
โ
Status: pending
keeper_id: null
receipt_image: null
```

### 2. ุชูุซูู ุงูุฅูุตุงู (ุฃููู ุงููุฎุฒู):
```
ุฃููู ุงููุฎุฒู โ ุฑูุน ุตูุฑุฉ ุงูุฅูุตุงู โ ุชูุซูู
โ
Status: approved
keeper_id: [ID ุฃููู ุงููุฎุฒู]
receipt_image: [ูุณุงุฑ ุงูุตูุฑุฉ]
confirmed_at: [ุงูุชุงุฑูุฎ ูุงูููุช]
โ
ุฅุถุงูุฉ ุณุฌู ูู store_debt_ledger:
- entry_type: 'payment'
- amount: -[ุงููุจูุบ] (ุณุงูุจ ูุฃูู ุฎุตู ูู ุงูุฏูู)
```

### 3. ุญุณุงุจ ุงูุฏูู:
```sql
SELECT 
    store_id,
    SUM(amount) as total_debt
FROM store_debt_ledger
WHERE store_id = ?
GROUP BY store_id
```

ุญูุซ:
- ุงููุจูุนุงุช (sale): ููุฌุจ (+)
- ุงูุฅุฑุฌุงุนุงุช (return): ุณุงูุจ (-)
- ุงูุชุณุฏูุฏุงุช (payment): ุณุงูุจ (-)

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ:

1. ุชุฃูุฏ ูู ุชุดุบูู Migration ุจูุฌุงุญ
2. ุชุญูู ูู ุธููุฑ "ุฅูุตุงูุงุช ุงููุจุถ" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ูููุณูู
3. ุชุญูู ูู ุธููุฑ "ุชูุซูู ุฅูุตุงูุงุช ุงููุจุถ" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ ูุฃููู ุงููุฎุฒู
4. ุฌุฑุจ ุฅูุดุงุก ุฅูุตุงู ุฌุฏูุฏ
5. ุฌุฑุจ ุชูุซูู ุงูุฅูุตุงู ูู ุญุณุงุจ ุฃููู ุงููุฎุฒู
6. ุชุญูู ูู ุฎุตู ุงูุฏูู ูู ุฌุฏูู store_debt_ledger

---

## ๐ ุงูุฌุฏุงูู ุงููุชุฃุซุฑุฉ:

### store_payments (ูุญุฏุซ):
- โ ุฅุถุงูุฉ ุญูู `status`
- โ ุฅุถุงูุฉ ุญูู `confirmed_at`

### store_debt_ledger (ููุฌูุฏ):
- ูุณุชุฎุฏู ูุชุณุฌูู ุนูููุงุช ุงูุฎุตู ุนูุฏ ุงูุชูุซูู

---

## ๐ฏ ุงูููุฒุงุช ุงููููุฐุฉ:

โ ุฅูุดุงุก ุฅูุตุงู ูุจุถ ูู ุงููุณูู
โ ุญุงูุฉ pending ููุฅูุตุงูุงุช ุบูุฑ ุงูููุซูุฉ
โ ุชูุซูู ุงูุฅูุตุงู ูู ุฃููู ุงููุฎุฒู
โ ุฑูุน ุตูุฑุฉ ุงูุฅูุตุงู ุงููุฎุชูู
โ ุฎุตู ุชููุงุฆู ูู ุฏูู ุงููุชุฌุฑ ุนูุฏ ุงูุชูุซูู
โ ูุงุฌูุงุช ูุงููุฉ ูููุณูู ูุฃููู ุงููุฎุฒู
โ ููุณ ุขููุฉ ููุงุชูุฑ ุงูุจูุน (pending โ approved)
โ ุชูุงูู ูุน ูุธุงู ุงูุฏููู ุงูููุฌูุฏ

---

ุชุงุฑูุฎ ุงูุฅูุดุงุก: 31 ููุงูุฑ 2026
ุงูุญุงูุฉ: ุฌุงูุฒ ููุงุฎุชุจุงุฑ โ
